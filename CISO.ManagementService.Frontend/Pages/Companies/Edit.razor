@using MudBlazor
@using STZ.Frontend.Components
@using STZ.Frontend.Services
@using Microsoft.AspNetCore.Components.Forms
@using STZ.Shared.Entities
@inject LocalizationService Localization

<EditForm Model="Item" OnValidSubmit="OnSave">
    <MudGrid>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.Nit")" @bind-Value="@Item.Nit" />
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.Name")" @bind-Value="@Item.Name"/>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.Country")" @bind-Value="@Item.Country"/>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.State")" @bind-Value="@Item.State"/>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.City")" @bind-Value="@Item.City"/>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.Email")" @bind-Value="@Item.Email"/>
        </MudItem>
        <MudItem xs="12" sm="6">
            <MudTextField T="string" Label="@Localization.Get("General.Phone")" @bind-Value="@Item.Phone"/>
        </MudItem>
        <MudItem xs="12">
            <MudText Color="@Color.Error">
                <ValidationSummary/>
            </MudText>
        </MudItem>
    </MudGrid>
    
    <MudStack Row Class="mt-4" Justify="Justify.FlexEnd">
        <MudButton OnClick="() => MudDialog.Cancel()"><STZText Key="General.Cancel" /></MudButton>
        <MudButton Color="Color.Primary" Variant="Variant.Filled" ButtonType="ButtonType.Submit"><STZText Key="General.Update" /></MudButton>
    </MudStack>
</EditForm>

@code {
    [Parameter] public Company Item { get; set; }
    [CascadingParameter] private IMudDialogInstance MudDialog { get; set; } = default!;

    private void OnSave()
    {
        MudDialog.Close(DialogResult.Ok(Item));
    }
}